{"version":3,"file":"index.cjs","sources":["../src/index.js"],"sourcesContent":["class Popover {\n    constructor(popoverElemet, targetElement) {\n        this.popover = popoverElemet;\n        this.target = targetElement;\n        this.offset = 10;\n        this.init();\n    }\n\n    get isOpen() {\n        return this.popover.matches(\":popover-open\")\n    }\n\n    init() {\n        this.popover.style.setProperty(\"margin\", \"0\");\n        this.popover.style.setProperty(\"visibility\", \"hidden\");\n        this.popover.addEventListener(\"toggle\", this.toggleHandler.bind(this))\n        this.popover.addEventListener(\"beforetoggle\", this.beforeToggleHandler.bind(this));\n    }\n\n    toggleHandler() {\n        if (!this.isOpen) return;\n        this.calculatePopoverPosition();\n        this.popover.style.setProperty(\"visibility\", \"visible\")\n    }\n\n    beforeToggleHandler() {\n        if (!this.isOpen) return;\n        this.popover.style.setProperty(\"visibility\", \"hidden\");\n    }\n\n    calculatePopoverPosition() {\n        const position = this.popover.dataset['position'];\n        const rect = this.target.getBoundingClientRect();\n\n        switch (position) {\n            case \"bottom-center\":\n            case \"bottom\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n            case \"bottom-right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left}px`);\n                break;\n            }\n            case \"bottom-left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth - this.popover.clientWidth}px`);\n                break;\n            }\n            case \"right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth + this.offset}px`);\n                break;\n            }\n            case \"left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left - this.popover.clientWidth - this.offset}px`);\n                break;\n            }\n            case \"top\":\n            case \"top-center\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n            case \"top-right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left}px`);\n                break;\n            }\n            case \"top-left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth - this.popover.clientWidth}px`);\n                break;\n            }\n            default: {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n        }\n    }\n}\n\nfunction init() {\n    const popoverTargets = document.querySelectorAll(\"[popovertarget]\");\n    const popovers = [];\n    popoverTargets.forEach(target => popovers.push(new Popover(target.popoverTargetElement, target)));\n    new ResizeObserver(() => popovers.forEach(p => p.isOpen && p.calculatePopoverPosition())).observe(document.body);\n}\n\nexport default init;\n"],"names":["Popover","popoverElemet","targetElement","this","popover","target","offset","init","_proto","prototype","style","setProperty","addEventListener","toggleHandler","bind","beforeToggleHandler","isOpen","calculatePopoverPosition","position","dataset","rect","getBoundingClientRect","top","clientHeight","left","clientWidth","key","get","matches","popoverTargets","document","querySelectorAll","popovers","forEach","push","popoverTargetElement","ResizeObserver","p","observe","body"],"mappings":"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"}