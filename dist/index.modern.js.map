{"version":3,"file":"index.modern.js","sources":["../src/index.js"],"sourcesContent":["class Popover {\n    constructor(popoverElemet, targetElement) {\n        this.popover = popoverElemet;\n        this.target = targetElement;\n        this.offset = 10;\n        this.init();\n    }\n\n    get isOpen() {\n        return this.popover.matches(\":popover-open\")\n    }\n\n    init() {\n        this.popover.style.setProperty(\"margin\", \"0\");\n        this.popover.style.setProperty(\"visibility\", \"hidden\");\n        this.popover.addEventListener(\"toggle\", this.toggleHandler.bind(this))\n        this.popover.addEventListener(\"beforetoggle\", this.beforeToggleHandler.bind(this));\n    }\n\n    toggleHandler() {\n        if (!this.isOpen) return;\n        this.calculatePopoverPosition();\n        this.popover.style.setProperty(\"visibility\", \"visible\")\n    }\n\n    beforeToggleHandler() {\n        if (!this.isOpen) return;\n        this.popover.style.setProperty(\"visibility\", \"hidden\");\n    }\n\n    calculatePopoverPosition() {\n        const position = this.popover.dataset['position'];\n        const rect = this.target.getBoundingClientRect();\n\n        switch (position) {\n            case \"bottom-center\":\n            case \"bottom\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n            case \"bottom-right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left}px`);\n                break;\n            }\n            case \"bottom-left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth - this.popover.clientWidth}px`);\n                break;\n            }\n            case \"right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth + this.offset}px`);\n                break;\n            }\n            case \"left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left - this.popover.clientWidth - this.offset}px`);\n                break;\n            }\n            case \"top\":\n            case \"top-center\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n            case \"top-right\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left}px`);\n                break;\n            }\n            case \"top-left\": {\n                this.popover.style.setProperty(\"top\", `${rect.top - this.offset - this.popover.clientHeight}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + this.target.clientWidth - this.popover.clientWidth}px`);\n                break;\n            }\n            default: {\n                this.popover.style.setProperty(\"top\", `${rect.top + this.target.clientHeight + this.offset}px`);\n                this.popover.style.setProperty(\"left\", `${rect.left + (this.target.clientWidth - this.popover.clientWidth) / 2}px`);\n                break;\n            }\n        }\n    }\n}\n\nfunction init() {\n    const popoverTargets = document.querySelectorAll(\"[popovertarget]\");\n    const popovers = [];\n    popoverTargets.forEach(target => popovers.push(new Popover(target.popoverTargetElement, target)));\n    new ResizeObserver(() => popovers.forEach(p => p.isOpen && p.calculatePopoverPosition())).observe(document.body);\n}\n\nexport default init;\n"],"names":["Popover","constructor","popoverElemet","targetElement","this","popover","target","offset","init","isOpen","matches","style","setProperty","addEventListener","toggleHandler","bind","beforeToggleHandler","calculatePopoverPosition","position","dataset","rect","getBoundingClientRect","top","clientHeight","left","clientWidth","popoverTargets","document","querySelectorAll","popovers","forEach","push","popoverTargetElement","ResizeObserver","p","observe","body"],"mappings":"AAAA,MAAMA,EACFC,WAAAA,CAAYC,EAAeC,GACvBC,KAAKC,QAAUH,EACfE,KAAKE,OAASH,EACdC,KAAKG,OAAS,GACdH,KAAKI,MACT,CAEA,UAAIC,GACA,YAAYJ,QAAQK,QAAQ,gBAChC,CAEAF,IAAAA,GACIJ,KAAKC,QAAQM,MAAMC,YAAY,SAAU,KACzCR,KAAKC,QAAQM,MAAMC,YAAY,aAAc,UAC7CR,KAAKC,QAAQQ,iBAAiB,SAAUT,KAAKU,cAAcC,KAAKX,OAChEA,KAAKC,QAAQQ,iBAAiB,eAAgBT,KAAKY,oBAAoBD,KAAKX,MAChF,CAEAU,aAAAA,GACSV,KAAKK,SACVL,KAAKa,2BACLb,KAAKC,QAAQM,MAAMC,YAAY,aAAc,WACjD,CAEAI,mBAAAA,GACSZ,KAAKK,QACVL,KAAKC,QAAQM,MAAMC,YAAY,aAAc,SACjD,CAEAK,wBAAAA,GACI,MAAMC,EAAWd,KAAKC,QAAQc,QAAkB,SAC1CC,EAAOhB,KAAKE,OAAOe,wBAEzB,OAAQH,GACJ,IAAK,gBACL,IAAK,SAyCL,QACId,KAAKC,QAAQM,MAAMC,YAAY,MAAQ,GAAEQ,EAAKE,IAAMlB,KAAKE,OAAOiB,aAAenB,KAAKG,YACpFH,KAAKC,QAAQM,MAAMC,YAAY,OAAS,GAAEQ,EAAKI,MAAQpB,KAAKE,OAAOmB,YAAcrB,KAAKC,QAAQoB,aAAe,OAC7G,MAvCJ,IAAK,eACDrB,KAAKC,QAAQM,MAAMC,YAAY,MAAQ,GAAEQ,EAAKE,IAAMlB,KAAKE,OAAOiB,aAAenB,KAAKG,YACpFH,KAAKC,QAAQM,MAAMC,YAAY,OAAS,GAAEQ,EAAKI,UAC/C,MAEJ,IAAK,cACDpB,KAAKC,QAAQM,MAAMC,YAAY,MAAQ,GAAEQ,EAAKE,IAAMlB,KAAKE,OAAOiB,aAAenB,KAAKG,YACpFH,KAAKC,QAAQM,MAAMC,YAAY,OAAWQ,EAAKI,KAAOpB,KAAKE,OAAOmB,YAAcrB,KAAKC,QAAQoB,YAArD,MACxC,MAEJ,IAAK,QACDrB,KAAKC,QAAQM,MAAMC,YAAY,MAAQ,GAAEQ,EAAKE,SAC9ClB,KAAKC,QAAQM,MAAMC,YAAY,OAAS,GAAEQ,EAAKI,KAAOpB,KAAKE,OAAOmB,YAAcrB,KAAKG,YACrF,MAEJ,IAAK,OACDH,KAAKC,QAAQM,MAAMC,YAAY,MAAQ,GAAEQ,EAAKE,SAC9ClB,KAAKC,QAAQM,MAAMC,YAAY,OAAWQ,EAAKI,KAAOpB,KAAKC,QAAQoB,YAAcrB,KAAKG,OAA9C,MACxC,MAEJ,IAAK,MACL,IAAK,aACDH,KAAKC,QAAQM,MAAMC,YAAY,MAAUQ,EAAKE,IAAMlB,KAAKG,OAASH,KAAKC,QAAQkB,aAAxC,MACvCnB,KAAKC,QAAQM,MAAMC,YAAY,OAAS,GAAEQ,EAAKI,MAAQpB,KAAKE,OAAOmB,YAAcrB,KAAKC,QAAQoB,aAAe,OAC7G,MAEJ,IAAK,YACDrB,KAAKC,QAAQM,MAAMC,YAAY,MAAUQ,EAAKE,IAAMlB,KAAKG,OAASH,KAAKC,QAAQkB,aAAxC,MACvCnB,KAAKC,QAAQM,MAAMC,YAAY,OAAS,GAAEQ,EAAKI,UAC/C,MAEJ,IAAK,WACDpB,KAAKC,QAAQM,MAAMC,YAAY,MAAUQ,EAAKE,IAAMlB,KAAKG,OAASH,KAAKC,QAAQkB,aAAxC,MACvCnB,KAAKC,QAAQM,MAAMC,YAAY,OAAWQ,EAAKI,KAAOpB,KAAKE,OAAOmB,YAAcrB,KAAKC,QAAQoB,YAArD,MASpD,EAGJ,SAASjB,IACL,MAAMkB,EAAiBC,SAASC,iBAAiB,mBAC3CC,EAAW,GACjBH,EAAeI,QAAQxB,GAAUuB,EAASE,KAAK,IAAI/B,EAAQM,EAAO0B,qBAAsB1B,KACxF,IAAI2B,eAAe,IAAMJ,EAASC,QAAQI,GAAKA,EAAEzB,QAAUyB,EAAEjB,6BAA6BkB,QAAQR,SAASS,KAC/G"}